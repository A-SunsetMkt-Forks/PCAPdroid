## 1.1 What is PCAPdroid

PCAPdroid is an open source network capture and monitoring tool which works without root privileges. The common use cases include:

- Analyze the connections made by the apps installed into the device, both user and system apps
- Create a PCAP of the network traffic of untrusted apps to detect unwanted behavior
- Decrypt the HTTPS/TLS traffic of an app for debugging purposes/reverse engeneering

PCAPdroid is free and open source and it doesn't countain any ads or tracking features. It is just a powerful tool for any tech user.

PCAPdroid leverages the android [VpnService](https://developer.android.com/reference/android/net/VpnService) to receive all the traffic generated by the android apps. No external VPN is actually created, the traffic is locally processed by the app.

## 1.2 Basic Usage

In order to start using PCAPdroid, you just need to tap the start button.

<p align="center">
<img src="https://raw.githubusercontent.com/emanuele-f/PCAPdroid/master/fastlane/metadata/android/en-US/images/phoneScreenshots/1.jpg" width="200" />
</p>

On the first start, a VPN confirmation dialog is shown. After accepting it, PCAPdroid will start capturing the traffic. PCAPdroid can be put in background while operating with the other apps as it continues to run as a service until the capture is stopped. As long as PCAPdroid is running, a key icon will be displayed into the android notification bar (this may vary depending on your system). Moreover, a persistent notification is shown, which includes the details about the captured traffic.

By default, an HTTP server is started on port 8080 to serve the traffic PCAP. You can visit the provided URL from the PC to start downloading the PCAP. Only the traffic generated after the download has been started will be captured. The download is streamed so it's normal to see a 0% progress indicator. It will finish once the stop button in PCAPdroid is pressed. Beware that any user in your local network can download a copy of your device traffic! If you want to avoid this, you can select "None" as the dump mode.

The connections made by the apps can be easily reviewed in the "Connections" tab.

<p align="center">
<img src="https://raw.githubusercontent.com/emanuele-f/PCAPdroid/master/fastlane/metadata/android/en-US/images/phoneScreenshots/2.jpg" width="200" />
</p>

Each row represents an outgoing connection made by an app or by the android system itself. The following information is show:

  - The app icon, or a question mark if the app is unknown
  - The app name
  - The protocol of the connection and the port. This is determined by analyzing the raw packets of the connection by using [nDPI](https://github.com/ntop/nDPI).
  - The server name information or DNS query
  - The total traffic volume of the connection
  - An "Open" indicator if the connection is currently open, or the time the connection was established for closed connections

By clicking on the connection it is possible to get more details about it.

<p align="center">
<img src="https://raw.githubusercontent.com/emanuele-f/PCAPdroid/master/fastlane/metadata/android/en-US/images/phoneScreenshots/3.jpg" width="200" />
</p>

During the capture, PCAPdroid logs all the connections in memory. After a limit is reached, old connections will be removed and replaced by new ones. The app shows a message when this happens.

## 1.3 App Filter

By default PCAPdroid captures the packets of all the android apps. You can limit the capture to a specific app by specifying an "App Filter". The capture will now affect only the specified applications. This is expecially useful when using the [TLS decryption](tls_decryption) to ensure that only the target app traffic will be affected by the TLS decoding.
